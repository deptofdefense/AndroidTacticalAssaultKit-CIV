dependencies {
    api project(':engine')
    api project(':annotation')
    api project(':port')

    testImplementation "org.assertj:assertj-core:$assertjVersion"

    if(isJavaKernelBuild) {
        // This dependency is found on compile classpath of this component and consumers.
        api("com.google.guava:guava:${guavaVersion}")

        api "org.jogamp.gluegen:gluegen-rt-main:${joglVersion}"
        api "org.jogamp.jogl:jogl-all-main:${joglVersion}"
        api("gov.tak.support:android-port:${androidPortVersion}")

        implementation "org.hibernate:hibernate-core:${hibernateCoreVersion}"
        implementation "org.apache.avro:avro:${avroVersion}"
    }
}

// default source sets

if(isJavaKernelBuild) {
    test {
        // Add dependency on jar task, since it will be main target for testing
        dependsOn ":engine:${runtimePlatform}Jar"

        // Rearrange test classpath, add compiled JAR instead of main classes
        classpath += rootProject.findProject(':engine').tasks.findByName("${runtimePlatform}Jar").outputs.files
    }
}